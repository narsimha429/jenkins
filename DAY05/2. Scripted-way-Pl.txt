node
{
    //   /var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/maven-3.9.6
   def mavenHome=tool name: "maven-3.9.6"
   stage('git checkout')
   {
     git branch: 'dev', url: 'https://github.com/kkdevopsb7/maven-webapplication-project-kkfunda.git'
   }
   stage('compile')
   {
    sh "${mavenHome}/bin/mvn compile"
   }

   stage('Build')
   {
    sh "${mavenHome}/bin/mvn clean package"
   }
   stage('SQ Report')
   {
    sh "${mavenHome}/bin/mvn sonar:sonar"
   }

   stage('Deploy Into Nexus')
   {
    sh "${mavenHome}/bin/mvn clean deploy"
   }

    stage('Deploy to Tomcat') 
    {
      
      sh """

      curl -u kk:password \
--upload-file /var/lib/jenkins/workspace/scripted-way-PL-1/target/maven-web-application.war \
"http://35.154.1.242:8080/manager/text/deploy?path=/maven-web-application&update=true"
          
        """
    }

	
}  //node ending
